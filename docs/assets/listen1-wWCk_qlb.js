import{f as be,C as oe,P as U,U as x,p as Ne,r as he,n as Ve,q as ee,D as ge,Q as we,E as ne,F as ye,M as _e,_ as Ie,t as Ee,L as Se}from"./el-button-C2qGEwNP.js";import{E as Ae}from"./el-input-C5F3nq1G.js";import{K as te,Y as xe,aD as Pe,Z as g,ar as k,d as j,ay as Ce,a1 as Fe,r as _,ai as Te,J as T,aB as z,N as ke,o as ue,ak as Me,a as I,c as q,a4 as Y,Q as t,a5 as J,aR as L,a8 as R,a7 as ae,aa as C,b5 as Be,a3 as P,az as Z,a2 as K,at as De,ad as $e,e as A,t as O,ab as re,aG as ze,b4 as Le,a9 as le}from"./index-CDlqQBRa.js";const Re=100,Ke=600,se={beforeMount(s,w){const o=w.value,{interval:a=Re,delay:E=Ke}=te(o)?{}:o;let u,f;const l=()=>te(o)?o():o.handler(),v=()=>{f&&(clearTimeout(f),f=void 0),u&&(clearInterval(u),u=void 0)};s.addEventListener("mousedown",S=>{S.button===0&&(v(),l(),document.addEventListener("mouseup",()=>v(),{once:!0}),f=setTimeout(()=>{u=setInterval(()=>{l()},a)},E))})}},Oe=xe({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Pe,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:s=>s===null||g(s)||["min","max"].includes(s),default:null},name:String,placeholder:String,precision:{type:Number,validator:s=>s>=0&&s===Number.parseInt(`${s}`,10)},validateEvent:{type:Boolean,default:!0},...be(["ariaLabel"])}),Ue={[oe]:(s,w)=>w!==s,blur:s=>s instanceof FocusEvent,focus:s=>s instanceof FocusEvent,[U]:s=>g(s)||k(s),[x]:s=>g(s)||k(s)},qe=j({name:"ElInputNumber"}),Ye=j({...qe,props:Oe,emits:Ue,setup(s,{expose:w,emit:o}){const a=s,{t:E}=Ce(),u=Fe("input-number"),f=_(),l=Te({currentValue:a.modelValue,userInput:null}),{formItem:v}=Ne(),S=T(()=>g(a.modelValue)&&a.modelValue<=a.min),M=T(()=>g(a.modelValue)&&a.modelValue>=a.max),G=T(()=>{const e=F(a.step);return z(a.precision)?Math.max(F(a.modelValue),e):(e>a.precision,a.precision)}),N=T(()=>a.controls&&a.controlsPosition==="right"),d=he(),m=Ve(),h=T(()=>{if(l.userInput!==null)return l.userInput;let e=l.currentValue;if(k(e))return"";if(g(e)){if(Number.isNaN(e))return"";z(a.precision)||(e=e.toFixed(a.precision))}return e}),y=(e,n)=>{if(z(n)&&(n=G.value),n===0)return Math.round(e);let r=String(e);const c=r.indexOf(".");if(c===-1||!r.replace(".","").split("")[c+n])return e;const D=r.length;return r.charAt(D-1)==="5"&&(r=`${r.slice(0,Math.max(0,D-1))}6`),Number.parseFloat(Number(r).toFixed(n))},F=e=>{if(k(e))return 0;const n=e.toString(),r=n.indexOf(".");let c=0;return r!==-1&&(c=n.length-r-1),c},b=(e,n=1)=>g(e)?y(e+a.step*n):l.currentValue,Q=()=>{if(a.readonly||m.value||M.value)return;const e=Number(h.value)||0,n=b(e);B(n),o(U,l.currentValue),H()},W=()=>{if(a.readonly||m.value||S.value)return;const e=Number(h.value)||0,n=b(e,-1);B(n),o(U,l.currentValue),H()},X=(e,n)=>{const{max:r,min:c,step:i,precision:V,stepStrictly:D,valueOnClear:$}=a;r<c&&Ee("InputNumber","min should not be greater than max.");let p=Number(e);if(k(e)||Number.isNaN(p))return null;if(e===""){if($===null)return null;p=De($)?{min:c,max:r}[$]:$}return D&&(p=y(Math.round(p/i)*i,V),p!==e&&n&&o(x,p)),z(V)||(p=y(p,V)),(p>r||p<c)&&(p=p>r?r:c,n&&o(x,p)),p},B=(e,n=!0)=>{var r;const c=l.currentValue,i=X(e);if(!n){o(x,i);return}c===i&&e||(l.userInput=null,o(x,i),c!==i&&o(oe,i,c),a.validateEvent&&((r=v==null?void 0:v.validate)==null||r.call(v,"change").catch(V=>ee())),l.currentValue=i)},ie=e=>{l.userInput=e;const n=e===""?null:Number(e);o(U,n),B(n,!1)},ce=e=>{const n=e!==""?Number(e):"";(g(n)&&!Number.isNaN(n)||e==="")&&B(n),H(),l.userInput=null},de=()=>{var e,n;(n=(e=f.value)==null?void 0:e.focus)==null||n.call(e)},me=()=>{var e,n;(n=(e=f.value)==null?void 0:e.blur)==null||n.call(e)},fe=e=>{o("focus",e)},pe=e=>{var n;l.userInput=null,o("blur",e),a.validateEvent&&((n=v==null?void 0:v.validate)==null||n.call(v,"blur").catch(r=>ee()))},H=()=>{l.currentValue!==a.modelValue&&(l.currentValue=a.modelValue)},ve=e=>{document.activeElement===e.target&&e.preventDefault()};return ke(()=>a.modelValue,(e,n)=>{const r=X(e,!0);l.userInput===null&&r!==n&&(l.currentValue=r)},{immediate:!0}),ue(()=>{var e;const{min:n,max:r,modelValue:c}=a,i=(e=f.value)==null?void 0:e.input;if(i.setAttribute("role","spinbutton"),Number.isFinite(r)?i.setAttribute("aria-valuemax",String(r)):i.removeAttribute("aria-valuemax"),Number.isFinite(n)?i.setAttribute("aria-valuemin",String(n)):i.removeAttribute("aria-valuemin"),i.setAttribute("aria-valuenow",l.currentValue||l.currentValue===0?String(l.currentValue):""),i.setAttribute("aria-disabled",String(m.value)),!g(c)&&c!=null){let V=Number(c);Number.isNaN(V)&&(V=null),o(x,V)}i.addEventListener("wheel",ve,{passive:!1})}),Me(()=>{var e,n;const r=(e=f.value)==null?void 0:e.input;r==null||r.setAttribute("aria-valuenow",`${(n=l.currentValue)!=null?n:""}`)}),w({focus:de,blur:me}),(e,n)=>(I(),q("div",{class:J([t(u).b(),t(u).m(t(d)),t(u).is("disabled",t(m)),t(u).is("without-controls",!e.controls),t(u).is("controls-right",t(N))]),onDragstart:Z(()=>{},["prevent"])},[e.controls?Y((I(),q("span",{key:0,role:"button","aria-label":t(E)("el.inputNumber.decrease"),class:J([t(u).e("decrease"),t(u).is("disabled",t(S))]),onKeydown:L(W,["enter"])},[R(e.$slots,"decrease-icon",{},()=>[C(t(ne),null,{default:P(()=>[t(N)?(I(),K(t(ge),{key:0})):(I(),K(t(we),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[t(se),W]]):ae("v-if",!0),e.controls?Y((I(),q("span",{key:1,role:"button","aria-label":t(E)("el.inputNumber.increase"),class:J([t(u).e("increase"),t(u).is("disabled",t(M))]),onKeydown:L(Q,["enter"])},[R(e.$slots,"increase-icon",{},()=>[C(t(ne),null,{default:P(()=>[t(N)?(I(),K(t(ye),{key:0})):(I(),K(t(_e),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[t(se),Q]]):ae("v-if",!0),C(t(Ae),{id:e.id,ref_key:"input",ref:f,type:"number",step:e.step,"model-value":t(h),placeholder:e.placeholder,readonly:e.readonly,disabled:t(m),size:t(d),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,onKeydown:[L(Z(Q,["prevent"]),["up"]),L(Z(W,["prevent"]),["down"])],onBlur:pe,onFocus:fe,onInput:ie,onChange:ce},Be({_:2},[e.$slots.prefix?{name:"prefix",fn:P(()=>[R(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:P(()=>[R(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var Ge=Ie(Ye,[["__file","input-number.vue"]]);const Qe=$e(Ge),We={class:"listen-container"},He={class:"question"},Je={class:"actions"},en=j({__name:"listen1",setup(s){Le(N=>({"4ef89df6":t(l)}));const w=_(),o=_(),a=_(!1),E=_(),u=_(4),f=_(),l=_("12px");function v(N){const d=Array.from(N),m=Math.floor(Math.random()*d.length);return d[m]}function S(){const d=Math.random()*+`1e${u.value}`;let m=d.toFixed(0);const h=m.toString().length;if(h<u.value)for(let b=0;b<u.value-h;b++)m=`0${m}`;console.log(m,d);let y=new Set,F=m.split("").map(b=>parseInt(b));F.forEach(b=>{y.add(b)}),o.value=v(y),w.value=m,E.value=F.filter(b=>b===o.value).length}function M(){a.value=!0}function G(){a.value=!1,S()}return ue(()=>{if(S(),f.value){let{width:N,height:d}=f.value.getBoundingClientRect();l.value=`${Math.floor(Math.max(N,d)/20)}px`}}),(N,d)=>{const m=Qe,h=Se;return I(),q("div",We,[A("div",{class:"viewer",ref_key:"viewerRef",ref:f},[A("div",He,[A("div",null,O(t(w)),1),A("div",null,"有几个“"+O(t(o))+"”呢？",1)]),Y(A("div",{class:"answer"},O(t(E))+" 个 "+O(t(o)),513),[[re,t(a)]])],512),A("div",Je,[C(m,{modelValue:t(u),"onUpdate:modelValue":d[0]||(d[0]=y=>ze(u)?u.value=y:null),"controls-position":"right",size:"large"},null,8,["modelValue"]),C(h,{size:"large",type:"warning",onClick:G},{default:P(()=>d[1]||(d[1]=[le(" 重置 ")])),_:1}),Y(C(h,{size:"large",plain:"",type:"danger",onClick:M},{default:P(()=>d[2]||(d[2]=[le(" 查看答案 ")])),_:1},512),[[re,!t(a)]])])])}}});export{en as default};
