import{f as be,C as oe,P as K,U as S,p as Ne,r as he,n as Ve,q as ee,D as ge,Q as we,E as te,F as ye,M as _e,_ as Ie,t as Ee,L as Se}from"./el-button-DtkegSTR.js";import{E as Ae}from"./el-input-CirDhnZ_.js";import{K as ne,Y as xe,aD as Fe,Z as V,ar as C,d as J,ay as Pe,a1 as Ce,r as w,ai as Te,J as P,aB as D,N as ke,o as ue,ak as Me,a as y,c as O,a4 as U,Q as n,a5 as W,aR as z,a8 as $,a7 as ae,aa as x,b5 as Be,a3 as A,az as H,a2 as L,at as De,ad as ze,e as E,t as R,ab as re,aG as $e,b4 as Le,a9 as le}from"./index-CErpMxKg.js";const Re=100,Ke=600,se={beforeMount(s,g){const o=g.value,{interval:a=Re,delay:_=Ke}=ne(o)?{}:o;let u,m;const l=()=>ne(o)?o():o.handler(),N=()=>{m&&(clearTimeout(m),m=void 0),u&&(clearInterval(u),u=void 0)};s.addEventListener("mousedown",I=>{I.button===0&&(N(),l(),document.addEventListener("mouseup",()=>N(),{once:!0}),m=setTimeout(()=>{u=setInterval(()=>{l()},a)},_))})}},Oe=xe({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:Fe,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:s=>s===null||V(s)||["min","max"].includes(s),default:null},name:String,placeholder:String,precision:{type:Number,validator:s=>s>=0&&s===Number.parseInt(`${s}`,10)},validateEvent:{type:Boolean,default:!0},...be(["ariaLabel"])}),Ue={[oe]:(s,g)=>g!==s,blur:s=>s instanceof FocusEvent,focus:s=>s instanceof FocusEvent,[K]:s=>V(s)||C(s),[S]:s=>V(s)||C(s)},qe=J({name:"ElInputNumber"}),Ye=J({...qe,props:Oe,emits:Ue,setup(s,{expose:g,emit:o}){const a=s,{t:_}=Pe(),u=Ce("input-number"),m=w(),l=Te({currentValue:a.modelValue,userInput:null}),{formItem:N}=Ne(),I=P(()=>V(a.modelValue)&&a.modelValue<=a.min),T=P(()=>V(a.modelValue)&&a.modelValue>=a.max),q=P(()=>{const e=Z(a.step);return D(a.precision)?Math.max(Z(a.modelValue),e):(e>a.precision,a.precision)}),p=P(()=>a.controls&&a.controlsPosition==="right"),d=he(),v=Ve(),b=P(()=>{if(l.userInput!==null)return l.userInput;let e=l.currentValue;if(C(e))return"";if(V(e)){if(Number.isNaN(e))return"";D(a.precision)||(e=e.toFixed(a.precision))}return e}),F=(e,t)=>{if(D(t)&&(t=q.value),t===0)return Math.round(e);let r=String(e);const c=r.indexOf(".");if(c===-1||!r.replace(".","").split("")[c+t])return e;const M=r.length;return r.charAt(M-1)==="5"&&(r=`${r.slice(0,Math.max(0,M-1))}6`),Number.parseFloat(Number(r).toFixed(t))},Z=e=>{if(C(e))return 0;const t=e.toString(),r=t.indexOf(".");let c=0;return r!==-1&&(c=t.length-r-1),c},j=(e,t=1)=>V(e)?F(e+a.step*t):l.currentValue,Y=()=>{if(a.readonly||v.value||T.value)return;const e=Number(b.value)||0,t=j(e);k(t),o(K,l.currentValue),Q()},G=()=>{if(a.readonly||v.value||I.value)return;const e=Number(b.value)||0,t=j(e,-1);k(t),o(K,l.currentValue),Q()},X=(e,t)=>{const{max:r,min:c,step:i,precision:h,stepStrictly:M,valueOnClear:B}=a;r<c&&Ee("InputNumber","min should not be greater than max.");let f=Number(e);if(C(e)||Number.isNaN(f))return null;if(e===""){if(B===null)return null;f=De(B)?{min:c,max:r}[B]:B}return M&&(f=F(Math.round(f/i)*i,h),f!==e&&t&&o(S,f)),D(h)||(f=F(f,h)),(f>r||f<c)&&(f=f>r?r:c,t&&o(S,f)),f},k=(e,t=!0)=>{var r;const c=l.currentValue,i=X(e);if(!t){o(S,i);return}c===i&&e||(l.userInput=null,o(S,i),c!==i&&o(oe,i,c),a.validateEvent&&((r=N==null?void 0:N.validate)==null||r.call(N,"change").catch(h=>ee())),l.currentValue=i)},ie=e=>{l.userInput=e;const t=e===""?null:Number(e);o(K,t),k(t,!1)},ce=e=>{const t=e!==""?Number(e):"";(V(t)&&!Number.isNaN(t)||e==="")&&k(t),Q(),l.userInput=null},de=()=>{var e,t;(t=(e=m.value)==null?void 0:e.focus)==null||t.call(e)},me=()=>{var e,t;(t=(e=m.value)==null?void 0:e.blur)==null||t.call(e)},fe=e=>{o("focus",e)},pe=e=>{var t;l.userInput=null,o("blur",e),a.validateEvent&&((t=N==null?void 0:N.validate)==null||t.call(N,"blur").catch(r=>ee()))},Q=()=>{l.currentValue!==a.modelValue&&(l.currentValue=a.modelValue)},ve=e=>{document.activeElement===e.target&&e.preventDefault()};return ke(()=>a.modelValue,(e,t)=>{const r=X(e,!0);l.userInput===null&&r!==t&&(l.currentValue=r)},{immediate:!0}),ue(()=>{var e;const{min:t,max:r,modelValue:c}=a,i=(e=m.value)==null?void 0:e.input;if(i.setAttribute("role","spinbutton"),Number.isFinite(r)?i.setAttribute("aria-valuemax",String(r)):i.removeAttribute("aria-valuemax"),Number.isFinite(t)?i.setAttribute("aria-valuemin",String(t)):i.removeAttribute("aria-valuemin"),i.setAttribute("aria-valuenow",l.currentValue||l.currentValue===0?String(l.currentValue):""),i.setAttribute("aria-disabled",String(v.value)),!V(c)&&c!=null){let h=Number(c);Number.isNaN(h)&&(h=null),o(S,h)}i.addEventListener("wheel",ve,{passive:!1})}),Me(()=>{var e,t;const r=(e=m.value)==null?void 0:e.input;r==null||r.setAttribute("aria-valuenow",`${(t=l.currentValue)!=null?t:""}`)}),g({focus:de,blur:me}),(e,t)=>(y(),O("div",{class:W([n(u).b(),n(u).m(n(d)),n(u).is("disabled",n(v)),n(u).is("without-controls",!e.controls),n(u).is("controls-right",n(p))]),onDragstart:H(()=>{},["prevent"])},[e.controls?U((y(),O("span",{key:0,role:"button","aria-label":n(_)("el.inputNumber.decrease"),class:W([n(u).e("decrease"),n(u).is("disabled",n(I))]),onKeydown:z(G,["enter"])},[$(e.$slots,"decrease-icon",{},()=>[x(n(te),null,{default:A(()=>[n(p)?(y(),L(n(ge),{key:0})):(y(),L(n(we),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[n(se),G]]):ae("v-if",!0),e.controls?U((y(),O("span",{key:1,role:"button","aria-label":n(_)("el.inputNumber.increase"),class:W([n(u).e("increase"),n(u).is("disabled",n(T))]),onKeydown:z(Y,["enter"])},[$(e.$slots,"increase-icon",{},()=>[x(n(te),null,{default:A(()=>[n(p)?(y(),L(n(ye),{key:0})):(y(),L(n(_e),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[n(se),Y]]):ae("v-if",!0),x(n(Ae),{id:e.id,ref_key:"input",ref:m,type:"number",step:e.step,"model-value":n(b),placeholder:e.placeholder,readonly:e.readonly,disabled:n(v),size:n(d),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,onKeydown:[z(H(Y,["prevent"]),["up"]),z(H(G,["prevent"]),["down"])],onBlur:pe,onFocus:fe,onInput:ie,onChange:ce},Be({_:2},[e.$slots.prefix?{name:"prefix",fn:A(()=>[$(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:A(()=>[$(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var Ge=Ie(Ye,[["__file","input-number.vue"]]);const Qe=ze(Ge),We={class:"listen-container"},He={class:"question"},Je={class:"actions"},et=J({__name:"listen1",setup(s){Le(p=>({"66cc087c":n(l)}));const g=w(),o=w(),a=w(!1),_=w(),u=w(4),m=w(),l=w("12px");function N(p){const d=Array.from(p),v=Math.floor(Math.random()*d.length);return d[v]}function I(){let p=(parseFloat(Math.random().toFixed(u.value))*+`1e${u.value}`).toFixed(0),d=new Set,v=p.toString().split("").map(b=>parseInt(b));v.forEach(b=>{d.add(b)}),o.value=N(d),g.value=p,_.value=v.filter(b=>b===o.value).length}function T(){a.value=!0}function q(){a.value=!1,I()}return ue(()=>{if(I(),m.value){let{width:p,height:d}=m.value.getBoundingClientRect();l.value=`${Math.floor(Math.max(p,d)/20)}px`}}),(p,d)=>{const v=Qe,b=Se;return y(),O("div",We,[E("div",{class:"viewer",ref_key:"viewerRef",ref:m},[E("div",He,[E("div",null,R(n(g)),1),E("div",null,"有几个“"+R(n(o))+"”呢？",1)]),U(E("div",{class:"answer"},R(n(_))+" 个 "+R(n(o)),513),[[re,n(a)]])],512),E("div",Je,[x(v,{modelValue:n(u),"onUpdate:modelValue":d[0]||(d[0]=F=>$e(u)?u.value=F:null),"controls-position":"right",size:"large"},null,8,["modelValue"]),x(b,{size:"large",type:"warning",onClick:q},{default:A(()=>d[1]||(d[1]=[le(" 重置 ")])),_:1}),U(x(b,{size:"large",plain:"",type:"danger",onClick:T},{default:A(()=>d[2]||(d[2]=[le(" 查看答案 ")])),_:1},512),[[re,!n(a)]])])])}}});export{et as default};
